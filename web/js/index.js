require(["text!nav-links.json","ojs/ojbootstrap","knockout","ojs/ojarraydataprovider","ojs/ojmodule-element-utils","ojs/ojmodule-element","ojs/ojknockout","ojs/ojnavigationlist","ojs/ojprogress"],(function(e,i,s,t,o){function n(){this.moduleConfig=s.observable({view:[],viewModel:null}),this.currentNavLink=s.observable(),this.isModuleReady=s.observable(!1),this.progressValue=s.observable(0),this.navLinks=null,this.navLinksDP=null,this.onNavLinkChanged=function(e){let i=e.detail.value,s=this.navLinks.find(e=>e.id===i);this.currentNavLink(s),this.loadModuleConfig(s.id,s)}.bind(this),this.showProgress=s.computed(()=>this.progressValue()>5&&this.progressValue()<100),this.updateProgress=()=>{if(this.progressValue()<100){let e=2,i=1500/(100/e);this.progressValue(this.progressValue()+e),setTimeout(this.updateProgress,i)}},this.loadModuleConfig=function(e,i){console.log("Loading module: ",e,i),this.isModuleReady(!1),this.progressValue(0),this.updateProgress();let s=(i=Object.assign(i||{},{pathPrefix:"examples"})).pathPrefix,t=`${s}/${e}.html`,n=`${s}/${e}`,a=[],l=o.createView({viewPath:t});if(a.push(l),!i.skipViewModel){let e=o.createViewModel({viewModelPath:n});a.push(e)}if(!i.skipCss){let i=new Promise((function(i,t){require([`css!${s}/${e}.css`],i,t)}));a.push(i)}Promise.all(a).then(e=>{this.moduleConfig({view:e[0],viewModel:e[1]}),this.isModuleReady(!0),this.progressValue(100)})},this.init=function(){let i;this.navLinks=JSON.parse(e),this.navLinksDP=new t(this.navLinks,{keyAttributes:"id"});let s=new URLSearchParams(window.location.search);if(s.has("id")){let e=s.get("id");if(i=this.navLinks.find(i=>i.id===e),!i){i={id:e,pageTitle:e};for(let e of s.entries())i[e[0]]=e[1]}}else i=this.navLinks.find(e=>e.isDefault);this.currentNavLink(i),this.loadModuleConfig(i.id,i)},this.init()}i.whenDocumentReady().then((function(){let e=new n;s.applyBindings(e,document.getElementById("app"))}))}));