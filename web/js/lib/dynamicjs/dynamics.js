(function(){var t,e,n,r,o,i,s,a,l,u,f,h,p,c,m,d,g,y,v,b,w,x,M,S,k,T,C,H,R,q,I,X,Y,A,j,z,F,G,O,V,Z,E,L,D,P,W,N,U,$,B,K,J,Q,_,tt,et,nt,rt,ot,it,st,at,lt=function(t,e){return function(){return t.apply(e,arguments)}};I=function(){return"visible"===document.visibilityState||null!=H.tests},ot=[],"undefined"!=typeof document&&null!==document&&document.addEventListener("visibilitychange",(function(){var t,e,n,r;for(r=[],e=0,n=ot.length;e<n;e++)t=ot[e],r.push(t(I()));return r})),z=function(t){return ot.push(t)},S=function(t){var e,n,r;for(e in n={},t)r=t[e],n[e]=r;return n},x=function(t){var e;return e={},function(){var n,r,o,i;for(n="",o=0,i=arguments.length;o<i;o++)n+=arguments[o].toString()+",";return(r=e[n])||(e[n]=r=t.apply(this,arguments)),r}},j=function(t){return function(e){var n,r;return e instanceof Array||e instanceof NodeList||e instanceof HTMLCollection?function(){var o,i,s;for(s=[],r=o=0,i=e.length;0<=i?o<i:o>i;r=0<=i?++o:--o)(n=Array.prototype.slice.call(arguments,1)).splice(0,0,e[r]),s.push(t.apply(this,n));return s}.apply(this,arguments):t.apply(this,arguments)}},y=function(t,e){var n,r,o;for(n in o=[],e)r=e[n],o.push(null!=t[n]?t[n]:t[n]=r);return o},v=function(t,e){var n,r,o;if(null!=t.style)return b(t,e);for(n in o=[],e)r=e[n],o.push(t[n]=r.format());return o},b=function(t,e){var n,r,o,i,s;for(r in e=F(e),i=[],n=X(t),e)s=e[r],et.contains(r)?i.push([r,s]):(null!=s.format&&(s=s.format()),"number"==typeof s&&(s=""+s+rt(r,s)),null!=t.hasAttribute&&t.hasAttribute(r)?t.setAttribute(r,s):null!=t.style&&(t.style[O(r)]=s),r in t&&(t[r]=s));if(i.length>0)return n?((o=new u).applyProperties(i),t.setAttribute("transform",o.decompose().format())):(s=i.map((function(t){return nt(t[0],t[1])})).join(" "),t.style[O("transform")]=s)},X=function(t){var e,n;return"undefined"!=typeof SVGElement&&null!==SVGElement&&"undefined"!=typeof SVGSVGElement&&null!==SVGSVGElement?t instanceof SVGElement&&!(t instanceof SVGSVGElement):null!=(e=null!=(n=H.tests)&&"function"==typeof n.isSVG?n.isSVG(t):void 0)&&e},E=function(t,e){var n;return n=Math.pow(10,e),Math.round(t*n)/n},f=function(){function t(t){var e,n,r;for(this.obj={},n=0,r=t.length;n<r;n++)e=t[n],this.obj[e]=1}return t.prototype.contains=function(t){return 1===this.obj[t]},t}(),tt=function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))},V=new f("marginTop,marginLeft,marginBottom,marginRight,paddingTop,paddingLeft,paddingBottom,paddingRight,top,left,bottom,right,translateX,translateY,translateZ,perspectiveX,perspectiveY,perspectiveZ,width,height,maxWidth,maxHeight,minWidth,minHeight,borderRadius".split(",")),C=new f("rotate,rotateX,rotateY,rotateZ,skew,skewX,skewY,skewZ".split(",")),et=new f("translate,translateX,translateY,translateZ,scale,scaleX,scaleY,scaleZ,rotate,rotateX,rotateY,rotateZ,rotateC,rotateCX,rotateCY,skew,skewX,skewY,skewZ,perspective".split(",")),K=new f("accent-height,ascent,azimuth,baseFrequency,baseline-shift,bias,cx,cy,d,diffuseConstant,divisor,dx,dy,elevation,filterRes,fx,fy,gradientTransform,height,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,letter-spacing,limitingConeAngle,markerHeight,markerWidth,numOctaves,order,overline-position,overline-thickness,pathLength,points,pointsAtX,pointsAtY,pointsAtZ,r,radius,rx,ry,seed,specularConstant,specularExponent,stdDeviation,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,surfaceScale,target,targetX,targetY,transform,underline-position,underline-thickness,viewBox,width,x,x1,x2,y,y1,y2,z".split(",")),rt=function(t,e){return"number"!=typeof e?"":V.contains(t)?"px":C.contains(t)?"deg":""},nt=function(t,e){var n,r;return null!=(n=(""+e).match(/^([0-9.-]*)([^0-9]*)$/))?(e=n[1],r=n[2]):e=parseFloat(e),e=E(parseFloat(e),10),null!=r&&""!==r||(r=rt(t,e)),t+"("+e+r+")"},F=function(t){var e,n,r,o,i,s,a,l;for(o in r={},t)if(i=t[o],et.contains(o))if((n=o.match(/(translate|rotateC|rotate|skew|scale|perspective)(X|Y|Z|)/))&&n[2].length>0)r[o]=i;else for(s=0,a=(l=["X","Y","Z"]).length;s<a;s++)e=l[s],r[n[1]+e]=i;else r[o]=i;return r},T=function(t){var e;return""+(e="opacity"===t?1:0)+rt(t,e)},R=function(t,e){var n,r,o,i,s,a,f,h,p,m,d;if(i={},n=X(t),null!=t.style)for(s=window.getComputedStyle(t,null),f=0,p=e.length;f<p;f++)r=e[f],et.contains(r)?null==i.transform&&(o=n?new u(null!=(d=t.transform.baseVal.consolidate())?d.matrix:void 0):l.fromTransform(s[O("transform")]),i.transform=o.decompose()):(null!=(a=null!=t.hasAttribute&&t.hasAttribute(r)?t.getAttribute(r):r in t?t[r]:s[r])&&"d"!==r||!K.contains(r)||(a=t.getAttribute(r)),""!==a&&null!=a||(a=T(r)),i[r]=k(a));else for(h=0,m=e.length;h<m;h++)i[r=e[h]]=k(t[r]);return c(t,i),i},c=function(t,e){var n,r;for(r in e)(n=e[r])instanceof i&&null!=t.style&&r in t.style&&(n=new a([n,rt(r,0)])),e[r]=n;return e},k=function(t){var e,n,o,l;for(o=0,l=(n=[r,s,i,a]).length;o<l;o++)if(null!=(e=n[o].create(t)))return e;return null},a=function(){function t(t){this.parts=t,this.format=lt(this.format,this),this.interpolate=lt(this.interpolate,this)}return t.prototype.interpolate=function(e,n){var r,o,i,s,a,l;for(s=this.parts,r=e.parts,i=[],o=a=0,l=Math.min(s.length,r.length);0<=l?a<l:a>l;o=0<=l?++a:--a)null!=s[o].interpolate?i.push(s[o].interpolate(r[o],n)):i.push(s[o]);return new t(i)},t.prototype.format=function(){return this.parts.map((function(t){return null!=t.format?t.format():t})).join("")},t.create=function(e){var n,r,s,a,l,u,f,h,p,c,m;for(e=""+e,s=[],h=0,c=(f=[{re:/(#[a-f\d]{3,6})/gi,klass:o,parse:function(t){return t}},{re:/(rgba?\([0-9.]*, ?[0-9.]*, ?[0-9.]*(?:, ?[0-9.]*)?\))/gi,klass:o,parse:function(t){return t}},{re:/([-+]?[\d.]+)/gi,klass:i,parse:parseFloat}]).length;h<c;h++)for(l=(u=f[h]).re;r=l.exec(e);)s.push({index:r.index,length:r[1].length,interpolable:u.klass.create(u.parse(r[1]))});for(a=[],n=0,p=0,m=(s=s.sort((function(t,e){return t.index>e.index?1:-1}))).length;p<m;p++)(r=s[p]).index<n||(r.index>n&&a.push(e.substring(n,r.index)),a.push(r.interpolable),n=r.index+r.length);return n<e.length&&a.push(e.substring(n)),new t(a)},t}(),s=function(){function t(t){this.format=lt(this.format,this),this.interpolate=lt(this.interpolate,this),this.obj=t}return t.prototype.interpolate=function(e,n){var r,o,i,s,a;for(o in s=this.obj,r=e.obj,i={},s)null!=(a=s[o]).interpolate?i[o]=a.interpolate(r[o],n):i[o]=a;return new t(i)},t.prototype.format=function(){return this.obj},t.create=function(e){var n,r,o;if(e instanceof Object){for(n in r={},e)o=e[n],r[n]=k(o);return new t(r)}return null},t}(),i=function(){function t(t){this.format=lt(this.format,this),this.interpolate=lt(this.interpolate,this),this.value=parseFloat(t)}return t.prototype.interpolate=function(e,n){var r;return r=this.value,new t((e.value-r)*n+r)},t.prototype.format=function(){return E(this.value,5)},t.create=function(e){return"number"==typeof e?new t(e):null},t}(),r=function(){function t(t){this.values=t,this.format=lt(this.format,this),this.interpolate=lt(this.interpolate,this)}return t.prototype.interpolate=function(e,n){var r,o,i,s,a,l;for(s=this.values,r=e.values,i=[],o=a=0,l=Math.min(s.length,r.length);0<=l?a<l:a>l;o=0<=l?++a:--a)null!=s[o].interpolate?i.push(s[o].interpolate(r[o],n)):i.push(s[o]);return new t(i)},t.prototype.format=function(){return this.values.map((function(t){return null!=t.format?t.format():t}))},t.createFromArray=function(e){return new t(e.map((function(t){return k(t)||t})).filter((function(t){return null!=t})))},t.create=function(e){return e instanceof Array?t.createFromArray(e):null},t}(),t=function(){function t(t,e){this.rgb=null!=t?t:{},this.format=e,this.toRgba=lt(this.toRgba,this),this.toRgb=lt(this.toRgb,this),this.toHex=lt(this.toHex,this)}return t.fromHex=function(e){var n,r;return null!=(n=e.match(/^#([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i))&&(e="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),null!=(r=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i))?new t({r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:1},"hex"):null},t.fromRgb=function(e){var n,r;return null!=(n=e.match(/^rgba?\(([0-9.]*), ?([0-9.]*), ?([0-9.]*)(?:, ?([0-9.]*))?\)$/))?new t({r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3]),a:parseFloat(null!=(r=n[4])?r:1)},null!=n[4]?"rgba":"rgb"):null},t.componentToHex=function(t){var e;return 1===(e=t.toString(16)).length?"0"+e:e},t.prototype.toHex=function(){return"#"+t.componentToHex(this.rgb.r)+t.componentToHex(this.rgb.g)+t.componentToHex(this.rgb.b)},t.prototype.toRgb=function(){return"rgb("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+")"},t.prototype.toRgba=function(){return"rgba("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+", "+this.rgb.a+")"},t}(),o=function(){function e(t){this.color=t,this.format=lt(this.format,this),this.interpolate=lt(this.interpolate,this)}return e.prototype.interpolate=function(n,r){var o,i,s,a,l,u,f,h;for(a=this.color,o=n.color,s={},u=0,f=(h=["r","g","b"]).length;u<f;u++)i=h[u],l=Math.round((o.rgb[i]-a.rgb[i])*r+a.rgb[i]),s[i]=Math.min(255,Math.max(0,l));return i="a",l=E((o.rgb[i]-a.rgb[i])*r+a.rgb[i],5),s[i]=Math.min(1,Math.max(0,l)),new e(new t(s,o.format))},e.prototype.format=function(){return"hex"===this.color.format?this.color.toHex():"rgb"===this.color.format?this.color.toRgb():"rgba"===this.color.format?this.color.toRgba():void 0},e.create=function(n){var r;if("string"==typeof n)return null!=(r=t.fromHex(n)||t.fromRgb(n))?new e(r):null},e}(),n=function(){function t(t){this.props=t,this.applyRotateCenter=lt(this.applyRotateCenter,this),this.format=lt(this.format,this),this.interpolate=lt(this.interpolate,this)}return t.prototype.interpolate=function(e,n){var r,o,i,s,a,l,u,f,h,p,c,m;for(i={},s=0,f=(p=["translate","scale","rotate"]).length;s<f;s++)for(i[o=p[s]]=[],r=a=0,c=this.props[o].length;0<=c?a<c:a>c;r=0<=c?++a:--a)i[o][r]=(e.props[o][r]-this.props[o][r])*n+this.props[o][r];for(r=l=1;l<=2;r=++l)i.rotate[r]=e.props.rotate[r];for(u=0,h=(m=["skew"]).length;u<h;u++)i[o=m[u]]=(e.props[o]-this.props[o])*n+this.props[o];return new t(i)},t.prototype.format=function(){return"translate("+this.props.translate.join(",")+") rotate("+this.props.rotate.join(",")+") skewX("+this.props.skew+") scale("+this.props.scale.join(",")+")"},t.prototype.applyRotateCenter=function(t){var e,n,r,o,i;for(n=(n=(n=(n=w.createSVGMatrix()).translate(t[0],t[1])).rotate(this.props.rotate[0])).translate(-t[0],-t[1]),r=new u(n).decompose().props.translate,i=[],e=o=0;o<=1;e=++o)i.push(this.props.translate[e]-=r[e]);return i},t}(),w="undefined"!=typeof document&&null!==document?document.createElementNS("http://www.w3.org/2000/svg","svg"):void 0,u=function(){function t(t){this.m=t,this.applyProperties=lt(this.applyProperties,this),this.decompose=lt(this.decompose,this),this.m||(this.m=w.createSVGMatrix())}return t.prototype.decompose=function(){var t,e,r,o,i;return o=new h([this.m.a,this.m.b]),i=new h([this.m.c,this.m.d]),t=o.length(),r=o.dot(i),o=o.normalize(),e=i.combine(o,1,-r).length(),new n({translate:[this.m.e,this.m.f],rotate:[180*Math.atan2(this.m.b,this.m.a)/Math.PI,this.rotateCX,this.rotateCY],scale:[t,e],skew:r/e*180/Math.PI})},t.prototype.applyProperties=function(t){var e,n,r,o,i,s,a,l;for(e={},i=0,s=t.length;i<s;i++)e[(r=t[i])[0]]=r[1];for(n in e)o=e[n],"translateX"===n?this.m=this.m.translate(o,0):"translateY"===n?this.m=this.m.translate(0,o):"scaleX"===n?this.m=this.m.scaleNonUniform(o,1):"scaleY"===n?this.m=this.m.scaleNonUniform(1,o):"rotateZ"===n?this.m=this.m.rotate(o):"skewX"===n?this.m=this.m.skewX(o):"skewY"===n&&(this.m=this.m.skewY(o));return this.rotateCX=null!=(a=e.rotateCX)?a:0,this.rotateCY=null!=(l=e.rotateCY)?l:0},t}(),h=function(){function t(t){this.els=t,this.combine=lt(this.combine,this),this.normalize=lt(this.normalize,this),this.length=lt(this.length,this),this.cross=lt(this.cross,this),this.dot=lt(this.dot,this),this.e=lt(this.e,this)}return t.prototype.e=function(t){return t<1||t>this.els.length?null:this.els[t-1]},t.prototype.dot=function(t){var e,n,r;if(e=t.els||t,r=0,(n=this.els.length)!==e.length)return null;for(n+=1;--n;)r+=this.els[n-1]*e[n-1];return r},t.prototype.cross=function(e){var n,r;return r=e.els||e,3!==this.els.length||3!==r.length?null:new t([(n=this.els)[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]])},t.prototype.length=function(){var t,e,n,r,o;for(t=0,n=0,r=(o=this.els).length;n<r;n++)e=o[n],t+=Math.pow(e,2);return Math.sqrt(t)},t.prototype.normalize=function(){var e,n,r,o,i;for(n in r=this.length(),o=[],i=this.els)e=i[n],o[n]=e/r;return new t(o)},t.prototype.combine=function(e,n,r){var o,i,s,a;for(i=[],o=s=0,a=this.els.length;0<=a?s<a:s>a;o=0<=a?++s:--s)i[o]=n*this.els[o]+r*e.els[o];return new t(i)},t}(),e=function(){function t(){this.toMatrix=lt(this.toMatrix,this),this.format=lt(this.format,this),this.interpolate=lt(this.interpolate,this)}return t.prototype.interpolate=function(e,n,r){var o,i,s,a,l,u,f,h,p,c,m,d,g,y,v,b,w;for(null==r&&(r=null),this,i=new t,m=0,v=(b=["translate","scale","skew","perspective"]).length;m<v;m++)for(i[u=b[m]]=[],s=d=0,w=this[u].length-1;0<=w?d<=w:d>=w;s=0<=w?++d:--d)null==r||r.indexOf(u)>-1||r.indexOf(""+u+["x","y","z"][s])>-1?i[u][s]=(e[u][s]-this[u][s])*n+this[u][s]:i[u][s]=this[u][s];if(null==r||-1!==r.indexOf("rotate")){if(f=this.quaternion,h=e.quaternion,(o=f[0]*h[0]+f[1]*h[1]+f[2]*h[2]+f[3]*h[3])<0){for(s=g=0;g<=3;s=++g)f[s]=-f[s];o=-o}for(o+1>.05?1-o>=.05?(c=Math.acos(o),l=1/Math.sin(c),p=Math.sin(c*(1-n))*l,a=Math.sin(c*n)*l):(p=1-n,a=n):(h[0]=-f[1],h[1]=f[0],h[2]=-f[3],h[3]=f[2],p=Math.sin(piDouble*(.5-n)),a=Math.sin(piDouble*n)),i.quaternion=[],s=y=0;y<=3;s=++y)i.quaternion[s]=f[s]*p+h[s]*a}else i.quaternion=this.quaternion;return i},t.prototype.format=function(){return this.toMatrix().toString()},t.prototype.toMatrix=function(){var t,e,n,r,o,i,s,a,u,f,h,p,c,m,d;for(this,r=l.I(4),t=p=0;p<=3;t=++p)r.els[t][3]=this.perspective[t];for(u=(o=this.quaternion)[0],f=o[1],h=o[2],a=o[3],i=this.skew,n=[[1,0],[2,0],[2,1]],t=c=2;c>=0;t=--c)i[t]&&((s=l.I(4)).els[n[t][0]][n[t][1]]=i[t],r=r.multiply(s));for(r=r.multiply(new l([[1-2*(f*f+h*h),2*(u*f-h*a),2*(u*h+f*a),0],[2*(u*f+h*a),1-2*(u*u+h*h),2*(f*h-u*a),0],[2*(u*h-f*a),2*(f*h+u*a),1-2*(u*u+f*f),0],[0,0,0,1]])),t=m=0;m<=2;t=++m){for(e=d=0;d<=2;e=++d)r.els[t][e]*=this.scale[t];r.els[3][t]=this.translate[t]}return r},t}(),l=function(){function t(t){this.els=t,this.toString=lt(this.toString,this),this.decompose=lt(this.decompose,this),this.inverse=lt(this.inverse,this),this.augment=lt(this.augment,this),this.toRightTriangular=lt(this.toRightTriangular,this),this.transpose=lt(this.transpose,this),this.multiply=lt(this.multiply,this),this.dup=lt(this.dup,this),this.e=lt(this.e,this)}return t.prototype.e=function(t,e){return t<1||t>this.els.length||e<1||e>this.els[0].length?null:this.els[t-1][e-1]},t.prototype.dup=function(){return new t(this.els)},t.prototype.multiply=function(e){var n,r,o,i,s,a,l,u,f,h,p,c,m;for(c=!!e.modulus,void 0===(n=e.els||e)[0][0]&&(n=new t(n).els),l=h=this.els.length,u=n[0].length,o=this.els[0].length,i=[],h+=1;--h;)for(i[s=l-h]=[],p=u,p+=1;--p;){for(a=u-p,m=0,f=o,f+=1;--f;)r=o-f,m+=this.els[s][r]*n[r][a];i[s][a]=m}return n=new t(i),c?n.col(1):n},t.prototype.transpose=function(){var e,n,r,o,i,s,a;for(a=this.els.length,n=[],i=e=this.els[0].length,i+=1;--i;)for(n[r=e-i]=[],s=a,s+=1;--s;)o=a-s,n[r][o]=this.els[o][r];return new t(n)},t.prototype.toRightTriangular=function(){var t,e,n,r,o,i,s,a,l,u,f,h,p,c;for(t=this.dup(),o=a=this.els.length,i=this.els[0].length;--a;){if(n=o-a,0===t.els[n][n])for(r=f=p=n+1;p<=o?f<o:f>o;r=p<=o?++f:--f)if(0!==t.els[r][n]){for(e=[],l=i,l+=1;--l;)u=i-l,e.push(t.els[n][u]+t.els[r][u]);t.els[n]=e;break}if(0!==t.els[n][n])for(r=h=c=n+1;c<=o?h<o:h>o;r=c<=o?++h:--h){for(s=t.els[r][n]/t.els[n][n],e=[],l=i,l+=1;--l;)u=i-l,e.push(u<=n?0:t.els[r][u]-t.els[n][u]*s);t.els[r]=e}}return t},t.prototype.augment=function(e){var n,r,o,i,s,a,l,u,f;if(void 0===(n=e.els||e)[0][0]&&(n=new t(n).els),o=(r=this.dup()).els[0].length,a=u=r.els.length,l=n[0].length,u!==n.length)return null;for(u+=1;--u;)for(i=a-u,f=l,f+=1;--f;)s=l-f,r.els[i][o+s]=n[i][s];return r},t.prototype.inverse=function(){var e,n,r,o,i,s,a,l,u,f,h,p,c;for(a=f=this.els.length,l=(e=this.augment(t.I(f)).toRightTriangular()).els[0].length,i=[],f+=1;--f;){for(r=[],h=l,i[o=f-1]=[],n=e.els[o][o],h+=1;--h;)p=l-h,u=e.els[o][p]/n,r.push(u),p>=a&&i[o].push(u);for(e.els[o]=r,s=c=0;0<=o?c<o:c>o;s=0<=o?++c:--c){for(r=[],h=l,h+=1;--h;)p=l-h,r.push(e.els[s][p]-e.els[o][p]*e.els[s][o]);e.els[s]=r}}return new t(i)},t.I=function(e){var n,r,o,i,s;for(n=[],i=e,e+=1;--e;)for(n[r=i-e]=[],s=i,s+=1;--s;)o=i-s,n[r][o]=r===o?1:0;return new t(n)},t.prototype.decompose=function(){var t,n,r,o,i,s,a,l,u,f,p,c,m,d,g,y,v,b,w,x,M,S,k,T,C,H,R,q,I,X,Y,A,j,z,F;for(this,b=[],g=[],y=[],[],s=[],t=[],n=H=0;H<=3;n=++H)for(t[n]=[],r=R=0;R<=3;r=++R)t[n][r]=this.els[n][r];if(0===t[3][3])return!1;for(n=q=0;q<=3;n=++q)for(r=I=0;I<=3;r=++I)t[n][r]/=t[3][3];for(a=this.dup(),n=X=0;X<=2;n=++X)a.els[n][3]=0;if(a.els[3][3]=1,0!==t[0][3]||0!==t[1][3]||0!==t[2][3]){for(f=new h(t.slice(0,4)[3]),s=a.inverse().transpose().multiply(f).els,n=Y=0;Y<=2;n=++Y)t[n][3]=0;t[3][3]=1}else s=[0,0,0,1];for(n=A=0;A<=2;n=++A)b[n]=t[3][n],t[3][n]=0;for(c=[],n=j=0;j<=2;n=++j)c[n]=new h(t[n].slice(0,3));if(g[0]=c[0].length(),c[0]=c[0].normalize(),y[0]=c[0].dot(c[1]),c[1]=c[1].combine(c[0],1,-y[0]),g[1]=c[1].length(),c[1]=c[1].normalize(),y[0]/=g[1],y[1]=c[0].dot(c[2]),c[2]=c[2].combine(c[0],1,-y[1]),y[2]=c[1].dot(c[2]),c[2]=c[2].combine(c[1],1,-y[2]),g[2]=c[2].length(),c[2]=c[2].normalize(),y[1]/=g[2],y[2]/=g[2],i=c[1].cross(c[2]),c[0].dot(i)<0)for(n=z=0;z<=2;n=++z)for(g[n]*=-1,r=F=0;F<=2;r=++F)c[n].els[r]*=-1;for(x in m=function(t,e){return c[t].els[e]},(p=[])[1]=Math.asin(-m(0,2)),0!==Math.cos(p[1])?(p[0]=Math.atan2(m(1,2),m(2,2)),p[2]=Math.atan2(m(0,1),m(0,0))):(p[0]=Math.atan2(-m(2,0),m(1,1)),p[1]=0),(v=m(0,0)+m(1,1)+m(2,2)+1)>1e-4?(S=.25/(d=.5/Math.sqrt(v)),k=(m(2,1)-m(1,2))*d,T=(m(0,2)-m(2,0))*d,C=(m(1,0)-m(0,1))*d):m(0,0)>m(1,1)&&m(0,0)>m(2,2)?(k=.25*(d=2*Math.sqrt(1+m(0,0)-m(1,1)-m(2,2))),T=(m(0,1)+m(1,0))/d,C=(m(0,2)+m(2,0))/d,S=(m(2,1)-m(1,2))/d):m(1,1)>m(2,2)?(d=2*Math.sqrt(1+m(1,1)-m(0,0)-m(2,2)),k=(m(0,1)+m(1,0))/d,T=.25*d,C=(m(1,2)+m(2,1))/d,S=(m(0,2)-m(2,0))/d):(d=2*Math.sqrt(1+m(2,2)-m(0,0)-m(1,1)),k=(m(0,2)+m(2,0))/d,T=(m(1,2)+m(2,1))/d,C=.25*d,S=(m(1,0)-m(0,1))/d),l=[k,T,C,S],(u=new e).translate=b,u.scale=g,u.skew=y,u.quaternion=l,u.perspective=s,u.rotate=p,u)for(o in w=u[x])M=w[o],isNaN(M)&&(w[o]=0);return u},t.prototype.toString=function(){var t,e,n,r,o;for(n="matrix3d(",t=r=0;r<=3;t=++r)for(e=o=0;o<=3;e=++o)n+=E(this.els[t][e],10),3===t&&3===e||(n+=",");return n+=")"},t.matrixForTransform=x((function(t){var e,n,r,o,i,s;return(e=document.createElement("div")).style.position="absolute",e.style.visibility="hidden",e.style[O("transform")]=t,document.body.appendChild(e),n=null!=(o=null!=(i=(r=window.getComputedStyle(e,null)).transform)?i:r[O("transform")])?o:null!=(s=H.tests)?s.matrixForTransform(t):void 0,document.body.removeChild(e),n})),t.fromTransform=function(e){var n,r,o,i,s,a;for(r=(i=null!=e?e.match(/matrix3?d?\(([-0-9,e \.]*)\)/):void 0)?6===(n=(n=i[1].split(",")).map(parseFloat)).length?[n[0],n[1],0,0,n[2],n[3],0,0,0,0,1,0,n[4],n[5],0,1]:n:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=[],o=a=0;a<=3;o=++a)s.push(r.slice(4*o,4*o+4));return new t(s)},t}(),G=x((function(t){var e,n,r,o,i,s,a,l,u,f;if(void 0!==document.body.style[t])return"";for(i="",s=0,l=(o=t.split("-")).length;s<l;s++)i+=(r=o[s]).substring(0,1).toUpperCase()+r.substring(1);for(a=0,u=(f=["Webkit","Moz","ms"]).length;a<u;a++)if(e=(n=f[a])+i,void 0!==document.body.style[e])return n;return""})),O=x((function(t){var e;return"Moz"===(e=G(t))?""+e+(t.substring(0,1).toUpperCase()+t.substring(1)):""!==e?"-"+e.toLowerCase()+"-"+tt(t):tt(t)})),Z="undefined"!=typeof window&&null!==window?window.requestAnimationFrame:void 0,d=[],g=[],N=!1,U=1,"undefined"!=typeof window&&null!==window&&window.addEventListener("keyup",(function(t){if(68===t.keyCode&&t.shiftKey&&t.ctrlKey)return H.toggleSlow()})),null==Z&&(Y=0,Z=function(t){var e,n,r;return e=Date.now(),r=Math.max(0,16-(e-Y)),n=window.setTimeout((function(){return t(e+r)}),r),Y=e+r,n}),D=!1,L=!1,B=function(){if(!D)return D=!0,Z(P)},P=function(t){var e,n,r,o;if(!L){for(n=[],r=0,o=d.length;r<o;r++)e=d[r],m(t,e)||n.push(e);return 0===(d=d.filter((function(t){return-1===n.indexOf(t)}))).length?D=!1:Z(P)}Z(P)},m=function(t,e){var n,r,o,i,s,a,l,u;if(null==e.tStart&&(e.tStart=t),i=(t-e.tStart)/e.options.duration,s=e.curve(i),r={},i>=1)r=e.curve.returnsToSelf?e.properties.start:e.properties.end;else for(n in u=e.properties.start)o=u[n],r[n]=q(o,e.properties.end[n],s);return v(e.el,r),"function"==typeof(a=e.options).change&&a.change(e.el,Math.min(1,i)),i>=1&&"function"==typeof(l=e.options).complete&&l.complete(e.el),i<1},q=function(t,e,n){return null!=t&&null!=t.interpolate?t.interpolate(e,n):null},$=function(t,e,n,r){var o,i,s,a,f,h,p;if(null!=r&&(g=g.filter((function(t){return t.id!==r}))),H.stop(t,{timeout:!1}),!n.animated)return H.css(t,e),void("function"==typeof n.complete&&n.complete(this));for(s in f=R(t,Object.keys(e)),o={},h=[],e=F(e))p=e[s],null!=t.style&&et.contains(s)?h.push([s,p]):o[s]=k(p);return h.length>0&&((i=X(t))?(a=new u).applyProperties(h):(p=h.map((function(t){return nt(t[0],t[1])})).join(" "),a=l.fromTransform(l.matrixForTransform(p))),o.transform=a.decompose(),i&&f.transform.applyRotateCenter([o.transform.props.rotate[1],o.transform.props.rotate[2]])),c(t,o),d.push({el:t,properties:{start:f,end:o},options:n,curve:n.type.call(n.type,n)}),B()},_=[],Q=0,W=function(t){if(I())return Z((function(){if(-1!==_.indexOf(t))return t.realTimeoutId=setTimeout((function(){return t.fn(),M(t.id)}),t.delay)}))},p=function(t,e){var n;return n={id:Q+=1,tStart:Date.now(),fn:t,delay:e,originalDelay:e},W(n),_.push(n),Q},M=function(t){return _=_.filter((function(e){return e.id===t&&e.realTimeoutId&&clearTimeout(e.realTimeoutId),e.id!==t}))},A=function(t,e){var n;return null!=t?(n=t-e.tStart,e.originalDelay-n):e.originalDelay},"undefined"!=typeof window&&null!==window&&window.addEventListener("unload",(function(){})),J=null,z((function(t){var e,n,r,o,i,s,a,l,u,f;if(L=!t,t){if(D)for(n=Date.now()-J,i=0,l=d.length;i<l;i++)null!=(e=d[i]).tStart&&(e.tStart+=n);for(s=0,u=_.length;s<u;s++)(r=_[s]).delay=A(J,r),W(r);return J=null}for(J=Date.now(),f=[],o=0,a=_.length;o<a;o++)r=_[o],f.push(clearTimeout(r.realTimeoutId));return f})),(H={}).linear=function(){return function(t){return t}},H.spring=function(t){var e,n,r,o,i;return null==t&&(t={}),y(t,H.spring.defaults),r=Math.max(1,t.frequency/20),o=Math.pow(20,t.friction/100),i=t.anticipationSize/1e3,Math.max(0,i),e=function(e){var n,r;return.8,0,(.8-(n=((r=i/(1-i))-0)/(r-0)))/r*e*t.anticipationStrength/100+n},n=function(t){return Math.pow(o/10,-t)*(1-t)},function(t){var o,s,a,l,u,f,h,p;return f=t/(1-i)-i/(1-i),t<i?(p=i/(1-i)-i/(1-i),h=0/(1-i)-i/(1-i),u=Math.acos(1/e(p)),a=(Math.acos(1/e(h))-u)/(r*-i),o=e):(o=n,u=0,a=1),s=o(f),l=r*(t-i)*a+u,1-s*Math.cos(l)}},H.bounce=function(t){var e,n,r,o;return null==t&&(t={}),y(t,H.bounce.defaults),r=Math.max(1,t.frequency/20),o=Math.pow(20,t.friction/100),e=function(t){return Math.pow(o/10,-t)*(1-t)},(n=function(t){var n,o;return-1.57,1,n=e(t),o=r*t*1-1.57,n*Math.cos(o)}).returnsToSelf=!0,n},H.gravity=function(t){var e,n,r,o,i,s;return null==t&&(t={}),y(t,H.gravity.defaults),n=Math.min(t.bounciness/1250,.8),o=t.elasticity/1e3,100,r=[],e=function(){var r,o;for(o={a:-(r=Math.sqrt(.02)),b:r,H:1},t.returnsToSelf&&(o.a=0,o.b=2*o.b);o.H>.001;)e=o.b-o.a,o={a:o.b,b:o.b+e*n,H:o.H*n*n};return o.b}(),s=function(n,r,o,i){var s,a;return s=(a=2/(e=r-n)*i-1-2*n/e)*a*o-o+1,t.returnsToSelf&&(s=1-s),s},function(){var i,s,a,l;for(a={a:-(s=Math.sqrt(2/(100*e*e))),b:s,H:1},t.returnsToSelf&&(a.a=0,a.b=2*a.b),r.push(a),i=e,l=[];a.b<1&&a.H>.001;)i=a.b-a.a,a={a:a.b,b:a.b+i*n,H:a.H*o},l.push(r.push(a))}(),(i=function(e){var n,o;for(n=r[o=0];!(e>=n.a&&e<=n.b)&&(n=r[o+=1]););return n?s(n.a,n.b,n.H,e):t.returnsToSelf?0:1}).returnsToSelf=t.returnsToSelf,i},H.forceWithGravity=function(t){return null==t&&(t={}),y(t,H.forceWithGravity.defaults),t.returnsToSelf=!0,H.gravity(t)},H.bezier=(st=function(t,e,n,r,o){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*r+Math.pow(t,3)*o},it=function(t,e,n,r,o){return{x:st(t,e.x,n.x,r.x,o.x),y:st(t,e.y,n.y,r.y,o.y)}},at=function(t,e,n){var r,o,i,s,a,l,u,f,h;for(r=null,f=0,h=e.length;f<h&&(t>=(o=e[f])(0).x&&t<=o(1).x&&(r=o),null===r);f++);if(!r)return n?0:1;for(u=r(a=((l=1)+(s=0))/2).x,i=0;Math.abs(t-u)>1e-4&&i<100;)t>u?s=a:l=a,u=r(a=(l+s)/2).x,i+=1;return r(a).y},function(t){var e,n,r;return null==t&&(t={}),r=t.points,e=function(){var t,n,o;for(t in e=[],o=function(t,n){var r;return r=function(e){return it(e,t,t.cp[t.cp.length-1],n.cp[0],n)},e.push(r)},r){if((n=parseInt(t))>=r.length-1)break;o(r[n],r[n+1])}return e}(),(n=function(t){return 0===t?0:1===t?1:at(t,e,this.returnsToSelf)}).returnsToSelf=0===r[r.length-1].y,n}),H.easeInOut=function(t){var e,n;return null==t&&(t={}),e=null!=(n=t.friction)?n:H.easeInOut.defaults.friction,H.bezier({points:[{x:0,y:0,cp:[{x:.92-e/1e3,y:0}]},{x:1,y:1,cp:[{x:.08+e/1e3,y:1}]}]})},H.easeIn=function(t){var e,n;return null==t&&(t={}),e=null!=(n=t.friction)?n:H.easeIn.defaults.friction,H.bezier({points:[{x:0,y:0,cp:[{x:.92-e/1e3,y:0}]},{x:1,y:1,cp:[{x:1,y:1}]}]})},H.easeOut=function(t){var e,n;return null==t&&(t={}),e=null!=(n=t.friction)?n:H.easeOut.defaults.friction,H.bezier({points:[{x:0,y:0,cp:[{x:0,y:0}]},{x:1,y:1,cp:[{x:.08+e/1e3,y:1}]}]})},H.spring.defaults={frequency:300,friction:200,anticipationSize:0,anticipationStrength:0},H.bounce.defaults={frequency:300,friction:200},H.forceWithGravity.defaults=H.gravity.defaults={bounciness:400,elasticity:200},H.easeInOut.defaults=H.easeIn.defaults=H.easeOut.defaults={friction:500},H.css=j((function(t,e){return b(t,e,!0)})),H.animate=j((function(t,e,n){var r;return null==n&&(n={}),n=S(n),y(n,{type:H.easeInOut,duration:1e3,delay:0,animated:!0}),n.duration=Math.max(0,n.duration*U),n.delay=Math.max(0,n.delay),0===n.delay?$(t,e,n):(r=H.setTimeout((function(){return $(t,e,n,r)}),n.delay),g.push({id:r,el:t}))})),H.stop=j((function(t,e){return null==e&&(e={}),null==e.timeout&&(e.timeout=!0),e.timeout&&(g=g.filter((function(n){return n.el!==t||null!=e.filter&&!e.filter(n)||(H.clearTimeout(n.id),!1)}))),d=d.filter((function(e){return e.el!==t}))})),H.setTimeout=function(t,e){return p(t,e*U)},H.clearTimeout=function(t){return M(t)},H.toggleSlow=function(){return U=(N=!N)?3:1,"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("dynamics.js: slow animations "+(N?"enabled":"disabled")):void 0},"object"==typeof module&&"object"==typeof module.exports?module.exports=H:"function"==typeof define?define("dynamics",(function(){return H})):window.dynamics=H}).call(this);