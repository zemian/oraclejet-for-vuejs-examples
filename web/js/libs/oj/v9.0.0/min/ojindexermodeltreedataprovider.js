/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
"use strict";define(["ojs/ojcore","jquery","ojs/ojtranslation","ojs/ojarraytreedataprovider","ojs/ojarraydataprovider","ojs/ojindexer"],function(t,e,s,i,r){class n{constructor(e,i){this.data=e,this.options=i;let n=i.sections;if(null==n){let t=s.getTranslatedString("oj-ojIndexer.indexerCharacters");n=t.split("|")}n.push(t.IndexerModel.SECTION_OTHERS);let o,a=i.groupingStrategy;if(null==a){let e=this.options.groupingAttribute;a=function(s){let i=(s[e]?s[e]:s).toString().toUpperCase()[0];return n.indexOf(i)>-1?i:t.IndexerModel.SECTION_OTHERS}}e=e.sort(function(t,e){let s=a(t),i=a(e);return n.indexOf(s)-n.indexOf(i)});for(let t=0;t<this.data.length;t++){let e=a(this.data[t]);o!==e&&(o=e,this._set(e,t))}let l=this,h=n.filter(function(t){return null!=l._get(t)});this.sections=n,this.baseDataProvider=new r(h,{keys:h})}_set(t,e){null==this.pos&&(this.pos=[]),this.pos.push({key:t,value:e})}_get(t){for(let e=0;e<this.pos.length;e++)if(this.pos[e].key===t)return this.pos[e].value;return null}getIndexableSections(){return this.sections.slice(0,this.sections.length-1)}getMissingSections(){if(null==this.missing){let t=[];for(let e=0;e<this.sections.length-1;e++){let s=this.sections[e];null==this._get(s)&&t.push(s)}this.missing=t}return this.missing}setSection(t){return this.options.sectionChangeHandler?this.options.sectionChangeHandler.call(this,t):Promise.resolve(t)}getChildDataProvider(t,e){if(null===t)return this;let s=t,r=this.sections.indexOf(s);if(r>-1){let e,s=this._get(t);if(null!=s)if(r===this.sections.length-1)e=this.data.slice(s);else{r+=1;let t=this.sections[r],i=this._get(t);for(;null==i&&r<this.sections.length;)r+=1,t=this.sections[r],i=this._get(t);(isNaN(i)||null==i)&&(i=this.data.length),e=this.data.slice(s,i)}else e=[];return new i(e,{keyAttributes:this.options.keyAttributes,sortComparators:this.options.sortComparators,implicitSort:this.options.implicitSort})}return null}getCapability(t){return this.baseDataProvider.getCapability(t)}getTotalSize(){return this.baseDataProvider.getTotalSize()}containsKeys(t){return this.baseDataProvider.containsKeys(t)}fetchByKeys(t){return this.baseDataProvider.fetchByKeys(t)}fetchByOffset(t){return this.baseDataProvider.fetchByOffset(t)}fetchFirst(t){return this.baseDataProvider.fetchFirst(t)}isEmpty(){return this.baseDataProvider.isEmpty()}addEventListener(t,e){this.baseDataProvider.addEventListener(t,e)}removeEventListener(t,e){this.baseDataProvider.removeEventListener(t,e)}dispatchEvent(t){return this.baseDataProvider.dispatchEvent(t)}}return t.IndexerModelTreeDataProvider=n,t.IndexerModelTreeDataProvider=n,n});