/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["ojs/ojcore","jquery","ojs/ojeditablevalue"],function(e,t){"use strict";var i={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},readonly:{type:"boolean",value:!1},translations:{type:"object",value:{}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"boolean",writeback:!0,value:!1}},methods:{refresh:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */e.__registerWidget("oj.ojSwitch",t.oj.editableValue,{version:"1.1.0",defaultElement:"<input>",widgetEventPrefix:"oj",options:{disabled:!1,labelledBy:null,readOnly:!1,value:!1},widget:function(){return this._element2},getNodeBySubId:function(e){var t,i=this._super(e),s=this.widget();return i||(i=null==e||null==e.subId?s:null)||"oj-switch-thumb"!==(t=e.subId)&&"oj-switch-track"!==t?i||null:s.find("."+t)[0]},getSubIdByNode:function(e){var i,s=t(this.element).attr("id"),n=this._super(e);return null!=e&&(t(e).hasClass("oj-switch-track")||t(e).hasClass("oj-switch-thumb"))&&(s===(i=t(e).parents("div.oj-switch").find("input.oj-component-initnode").attr("id"))&&t(e).hasClass("oj-switch-track")?n={subId:"oj-switch-track"}:s===i&&t(e).hasClass("oj-switch-thumb")&&(n={subId:"oj-switch-thumb"})),n},_BUNDLE_KEY:{_SWITCH_OFF:"SwitchOFF",_SWITCH_ON:"SwitchON"},_InitOptions:function(t,i){var s,n;s=[{attribute:"disabled",validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"checked",option:"value",validateOption:!1,coerceDomValue:function(e){return!!e}},{attribute:"title"}],this._super(t,i),this._IsCustomElement()||(e.EditableValueUtils.initializeOptionsFromDom(s,i,this),n=this.option("value"),this.option({value:!!n},{_context:{writeback:!0,internalSet:!0}}))},_ComponentCreate:function(){if(this._super(),!this.element.is("input"))throw new Error("ojSwitch can be bound to INPUT only.");this._inputElementOriginalDisplay=this.element.css("display"),this.element.css("display","none").attr("type","checkbox").attr("checked",this.option("value")).attr("tabindex","-1").attr("disabled",this.option("disabled")).attr("readonly",this.option("readOnly")),this.OuterWrapper?this._element2=t(this.OuterWrapper):this._element2=this.element.wrap("<div></div>").parent(),this._element2.addClass("oj-switch oj-component oj-form-control"),this._element2.append("<div class='oj-switch-container oj-form-control-container'><div class='oj-switch-track'><div class='oj-switch-thumb' tabIndex='0'></div></div></div>"),this.switchThumb=this._element2.find(".oj-switch-thumb"),this.switchThumb.attr("role",this._setSwitchRole())},_AfterCreate:function(){this._super();var e=this.switchThumb;this._SetAriaInfo(e),this._ariaLabelElement=this.switchThumb[0],this._setup()},_SetAriaInfo:function(t){var i,s;if(i=this.OuterWrapper?this._element2[0]:this._element2[0].querySelector("input"),this._IsCustomElement()){if(this.options.labelledBy){var n=this.uuid+"_Label";s=e.EditableValueUtils._getOjLabelAriaLabelledBy(this.options.labelledBy,n)}}else{var a=this._GetLabelElement();a&&(s=a.attr("id"))}if(s)t.attr("aria-labelledby",s);else{var o=i.getAttribute("aria-label");o&&(t.attr("aria-label",o),i.removeAttribute("aria-label"))}},_GetAriaLabelElement:function(){return this._ariaLabelElement?this._ariaLabelElement:this._super()},_setup:function(){var e=t(this.widget());if(this._setupEvents(),void 0!==e){if(this.element.attr("checked",this.option("value")),e.removeClass("oj-disabled oj-read-only oj-selected oj-hover oj-active"),t(this.switchThumb).attr("tabindex","0"),t(this.switchThumb).html(""),this.option("disabled")||this.option("readOnly"))if(this.option("disabled"))e.addClass("oj-disabled"),t(this.switchThumb).removeAttr("tabindex");else{e.addClass("oj-read-only");let i=this._setReadOnlyValue();t(this.switchThumb).html(i)}this.option("value")&&e.addClass("oj-selected"),t(this.switchThumb).attr("aria-checked",this.option("value")),t(this.switchThumb).removeAttr("aria-disabled"),e.removeAttr("aria-disabled"),this._CanSetValue()||t(this.switchThumb).attr("aria-disabled","true")}},_setReadOnlyValue:function(){var e=this._BUNDLE_KEY._SWITCH_OFF;return this.option("value")&&(e=this._BUNDLE_KEY._SWITCH_ON),this.getTranslatedString(e)},_setupEvents:function(){this._off(this._element2,"keydown keyup mouseup touchend"),this._CanSetValue()&&(this._on(this._element2,this._switchEvents),this._AddHoverable(this._element2),this._AddActiveable(this._element2)),this._focusable({element:this.switchThumb,applyHighlight:!0})},_switchEvents:{keydown:function(e){e.which!==t.ui.keyCode.ENTER&&e.which!==t.ui.keyCode.SPACE||(t(e.currentTarget).addClass("oj-active"),e.preventDefault())},keyup:function(e){e.which!==t.ui.keyCode.ENTER&&e.which!==t.ui.keyCode.SPACE||this._SetValue(!this.option("value"),e)},mouseup:function(e){1===e.which&&this._isRealMouseEvent(e)&&this._SetValue(!this.option("value"),e)},touchend:function(e){this._SetValue(!this.option("value"),e)}},_GetDefaultStyleClass:function(){return"oj-switch"},_CanSetValue:function(){return!!this._super()&&!this.options.readOnly},_setSwitchRole:function(){return"switch checkbox"},_destroy:function(){return this._CanSetValue()&&(this._RemoveHoverable(this._element2),this._RemoveActiveable(this._element2)),this._element2.find(".oj-switch-track").remove(),e.DomUtils.unwrap(this.element),this._RestoreAttributes(this.element),this._super()},_GetMessagingLauncherElement:function(){return this._element2},_GetContentElement:function(){return this.switchThumb},_AfterSetOption:function(t,i,s){switch(this._superApply(arguments),t){case"readOnly":this._AfterSetOptionDisabledReadOnly(t,e.EditableValueUtils.readOnlyOptionOptions)}},_setOption:function(e,t,i){var s;switch(e){case"disabled":case"readOnly":case"value":s=!!t;break;default:s=t}switch(this._super(e,s,i),e){case"labelledBy":this._SetAriaInfo(this.switchThumb)}},_isRealMouseEvent:function(){return!e.DomUtils.recentTouchEnd()},_Refresh:function(e,t,i){this._superApply(arguments),this._setup()}}),i.extension._WIDGET_NAME="ojSwitch",i.extension._INNER_ELEM="input",i.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-switch",{metadata:e.CollectionUtils.mergeDeep(i,{properties:{readonly:{binding:{consume:{name:"readonly"}}},userAssistanceDensity:{binding:{consume:{name:"userAssistanceDensity"}}}}})})});