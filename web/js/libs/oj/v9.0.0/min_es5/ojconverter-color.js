/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["ojs/ojcore","ojs/ojtranslation","ojs/ojconverter","ojs/ojvalidation-error"],function(t,r,o){"use strict";var n=function(t){this.Init(t)};return t.Object.createSubclass(n,o,"oj.ColorConverter"),n.prototype.Init=function(t){(t=t||{}).format=t.format||"rgb",n.superclass.Init.call(this,t)},n.prototype.format=function(t){var r=this._getFormat(),o=null;return"rgb"===r?o=t.toString():"hsl"===r?o=n._toHslString(t):"hex"===r?o=n._toHexString(t):"hex3"===r?o=n._toHexString(t,!0):"hsv"===r?o=n._toHsvString(t):n._throwInvalidColorFormatOption(),o||n.superclass.format.call(this,t)},n.prototype.parse=function(r){try{return new t.Color(r)}catch(t){throw n._throwInvalidColorSyntax()}},n.prototype.getHint=function(){return this._getFormat()},n.prototype.resolvedOptions=function(){return{format:this._getFormat()}},n.prototype.getOptions=function(){return n.superclass.getOptions.call(this)},n.prototype._getFormat=function(){return n.superclass.getOptions.call(this).format},n._toHexString=function(t,r){return"#"+n._toHex(t,r)},n._toHslString=function(t){var r=n._rgbToHsl(t._r,t._g,t._b),o=Math.round(360*r.h),a=Math.round(100*r.s),e=Math.round(100*r.l);return 1===t._a?"hsl("+o+", "+a+"%, "+e+"%)":"hsla("+o+", "+a+"%, "+e+"%, "+t._a+")"},n._toHex=function(t,r){return n._rgbToHex(t._r,t._g,t._b,r)},n._toHsvString=function(t){var r=n._rgbToHsv(t._r,t._g,t._b),o=Math.round(360*r.h),a=Math.round(100*r.s),e=Math.round(100*r.v);return 1===t._a?"hsv("+o+", "+a+"%, "+e+"%)":"hsva("+o+", "+a+"%, "+e+"%, "+t._a+")"},n._rgbToHex=function(t,r,o,a){var e=[n._pad2(Math.round(t).toString(16)),n._pad2(Math.round(r).toString(16)),n._pad2(Math.round(o).toString(16))];return a&&e[0].charAt(0)===e[0].charAt(1)&&e[1].charAt(0)===e[1].charAt(1)&&e[2].charAt(0)===e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")},n._rgbToHsl=function(t,r,o){t=n._bound01(t,255),r=n._bound01(r,255),o=n._bound01(o,255);var a,e,i=Math.max(t,r,o),s=Math.min(t,r,o),c=(i+s)/2;if(i===s)a=0,e=0;else{var u=i-s;switch(e=c>.5?u/(2-i-s):u/(i+s),i){case t:a=(r-o)/u+(r<o?6:0);break;case r:a=(o-t)/u+2;break;case o:a=(t-r)/u+4}a/=6}return{h:a,s:e,l:c}},n._rgbToHsv=function(t,r,o){t=n._bound01(t,255),r=n._bound01(r,255),o=n._bound01(o,255);var a,e=Math.max(t,r,o),i=Math.min(t,r,o),s=e,c=e-i,u=0===e?0:c/e;if(e===i)a=0;else{switch(e){case t:a=(r-o)/c+(r<o?6:0);break;case r:a=(o-t)/c+2;break;case o:a=(t-r)/c+4}a/=6}return{h:a,s:u,v:s}},n._bound01=function(t,r){n._isOnePointZero(t)&&(t="100%");var o=n._isPercentage(t);return t=Math.min(r,Math.max(0,parseFloat(t))),o&&(t=parseInt(t*r,10)/100),Math.abs(t-r)<1e-6?1:t%r/parseFloat(r)},n._isOnePointZero=function(t){return"string"==typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)},n._isPercentage=function(t){return"string"==typeof t&&-1!==t.indexOf("%")},n._pad2=function(t){return 1===t.length?"0"+t:""+t},n._throwInvalidColorSyntax=function(){var o=r.getTranslatedString("oj-converter.color.invalidSyntax.summary"),n=r.getTranslatedString("oj-converter.color.invalidSyntax.detail");throw new t.ConverterError(o,n)},n._throwInvalidColorFormatOption=function(){var o=r.getTranslatedString("oj-converter.color.invalidFormat.summary"),n=r.getTranslatedString("oj-converter.color.invalidFormat.detail");throw new t.ConverterError(o,n)},n});