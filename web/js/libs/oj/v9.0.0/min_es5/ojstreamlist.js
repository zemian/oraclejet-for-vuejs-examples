!function(){function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=a(t);if(n){var i=a(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}define(["exports","ojs/ojvcomponent","ojs/ojdatacollection-common","ojs/ojcontext","ojs/ojvcollection","ojs/ojcore-base","ojs/ojkeyset","ojs/ojtreedataprovider","ojs/ojanimation"],function(n,s,u,c,d,h,f,p,y){"use strict";
/**
   * @license
   * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */var v,m=function(e){i(s,d.IteratingDataProviderContentHandler);var n=l(s);function s(e,r,o,i){var l;return t(this,s),(l=n.call(this,e,r,o,i)).root=e,l.dataProvider=r,l.callback=o,l.scrollPolicyOptions=i,l.postRender=function(){var e=l.root.lastElementChild;e&&c.getContext(e).getBusyContext().whenReady().then(function(){if(l.callback){if(l.domScroller){var t=e.querySelectorAll(".oj-stream-list-item"),n=l.root.offsetTop,r=t[0].offsetTop-n,o=t[t.length-1].offsetTop+t[t.length-1].offsetHeight-n;l.domScroller.setViewportRange(r,o)}if(l.domScroller&&!l.domScroller.checkViewport())return}})},l.newItemsTracker=new Set,l.vnodesCache=new Map,l}return r(s,[{key:"handleFetchSuccess",value:function(e){null!=e&&this.newItemsTracker.clear(),o(a(s.prototype),"handleFetchSuccess",this).call(this,e)}},{key:"handleItemsUpdated",value:function(e){e.keys.forEach(function(e){this.vnodesCache.delete(e)}.bind(this)),o(a(s.prototype),"handleItemsUpdated",this).call(this,e)}},{key:"handleModelRefresh",value:function(){this.vnodesCache.clear(),o(a(s.prototype),"handleModelRefresh",this).call(this)}},{key:"addItem",value:function(e,t,n,r){var o=this.isInitialFetch();null==this.callback.getCurrentItem()&&o&&0==t&&this.callback.setCurrentItem(e);var i=this.renderItem(e,t,n);return this.decorateItem(i,e,t,o,r),i}},{key:"renderItem",value:function(e,t,n){var r=this.vnodesCache.get(e);if(r){if(r.index===t)return r.vnodes;this.vnodesCache.clear()}for(var o,i=this.callback.getItemRenderer()({data:n,key:e}),s=0;s<i.length;s++){if(1===i[s]._node.nodeType){o=i[s];break}}var l=[o];return this.vnodesCache.set(e,{index:t,vnodes:l}),l}},{key:"decorateItem",value:function(e,t,n,r,o){var i=e[0]._node;if(null!=i){i.key=t,i.setAttribute("key",JSON.stringify(t)),i.setAttribute("role","listitem"),i.setAttribute("tabIndex","-1"),this.getItemStyleClass(o,this.newItemsTracker.has(t),r).forEach(function(e){i.classList.add(e)});var s=this.getItemInlineStyle(o,n,r);Object.keys(s).forEach(function(e){i.style[e]=s[e]})}}},{key:"getItemInlineStyle",value:function(e,t,n){return{}}},{key:"getItemStyleClass",value:function(e,t,n){var r=[];return r.push("oj-stream-list-item"),r}},{key:"renderSkeletonsForLoadMore",value:function(){return this.callback.renderSkeletons(3)}}]),s}(),k=function(e){i(s,d.IteratingTreeDataProviderContentHandler);var n=l(s);function s(e,r,o,i){var l;return t(this,s),(l=n.call(this,e,r,o,i)).root=e,l.dataProvider=r,l.callback=o,l.scrollPolicyOptions=i,l.postRender=function(){var e=l.root.lastElementChild;e&&c.getContext(e).getBusyContext().whenReady().then(function(){l.checkViewport()})},l.getLoadMoreCount=function(){return 3},l.newItemsTracker=new Set,l.vnodesCache=new Map,l}return r(s,[{key:"handleFetchSuccess",value:function(e){null!=e&&this.newItemsTracker.clear(),o(a(s.prototype),"handleFetchSuccess",this).call(this,e)}},{key:"handleItemsUpdated",value:function(e){e.keys.forEach(function(e){this.vnodesCache.delete(e)}.bind(this)),o(a(s.prototype),"handleItemsUpdated",this).call(this,e)}},{key:"handleModelRefresh",value:function(){this.vnodesCache.clear(),o(a(s.prototype),"handleModelRefresh",this).call(this)}},{key:"addItem",value:function(e,t,n,r){var o=this.isInitialFetch();null==this.callback.getCurrentItem()&&o&&0==t&&this.callback.setCurrentItem(e.key);var i=this.renderItem(e,t,n);return this.decorateItem(i,e,t,o,r),i}},{key:"renderItem",value:function(e,t,n){var r,o,i,s=e.key,l=this.vnodesCache.get(s);if(l){if(l.index===t)return l.vnodes;this.vnodesCache.clear()}e.isLeaf||(r=this.callback.getGroupRenderer()),null==r&&(r=this.callback.getItemRenderer()),o=r({data:n,key:e.key,leaf:e.isLeaf,parentKey:e.parentKey,depth:e.treeDepth});for(var a=0;a<o.length;a++){if(1===o[a]._node.nodeType){i=o[a];break}}var u=[i];return this.vnodesCache.set(s,{index:t,vnodes:u}),u}},{key:"decorateItem",value:function(e,t,n,r,o){var i=e[0]._node;if(null!=i){i.key=t.key,i.setAttribute("key",JSON.stringify(t.key)),i.setAttribute("role","listitem"),i.setAttribute("tabIndex","-1"),this.getItemStyleClass(t,o,this.newItemsTracker.has(t.key),r).forEach(function(e){i.classList.add(e)});var s=this.getItemInlineStyle(t,o,n,r);if(Object.keys(s).forEach(function(e){i.style[e]=s[e]}),!t.isLeaf){var l=this.callback.getExpanded();l&&l.has(t.key)?i.setAttribute("aria-expanded","true"):i.setAttribute("aria-expanded","false")}}}},{key:"getItemInlineStyle",value:function(e,t,n,r){return{}}},{key:"getItemStyleClass",value:function(e,t,n,r){var o=[];return e.isLeaf?o.push("oj-stream-list-item"):o.push("oj-stream-list-group"),o}},{key:"renderSkeletonsForLoadMore",value:function(){return this.callback.renderSkeletons(3)}},{key:"renderSkeletonsForExpand",value:function(e){return this.callback.renderSkeletons(this.getLoadMoreCount(),!0,e)}}]),s}(),g=function(t,n,r,o){var i,s=arguments.length,l=s<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,r):o;if("object"===("undefined"==typeof Reflect?"undefined":e(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,r,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(l=(s<3?i(l):s>3?i(n,r,l):i(n,r))||l);return s>3&&l&&Object.defineProperty(n,r,l),l};n.StreamList=v=function(e){i(o,s.VComponent);var n=l(o);function o(e){var r;return t(this,o),(r=n.call(this,e)).restoreFocus=!1,r.actionableMode=!1,r.skeletonHeight=0,r.setRootElement=function(e){r.root=e},r.state={renderedData:null,outOfRangeData:null,initialSkeleton:!0,initialSkeletonCount:1,expandedToggleKeys:new f.KeySetImpl,expandedSkeletonKeys:new f.KeySetImpl,expandingKeys:new f.KeySetImpl,height:0},r}return r(o,[{key:"_handleFocusIn",value:function(){this._clearFocusoutTimeout()}},{key:"_handleFocusOut",value:function(){this._clearFocusoutTimeout(),this.actionableMode?this._focusoutTimeout=setTimeout(function(){this._doBlur()}.bind(this),100):this._isFocusBlurTriggeredByDescendent(event)||this._doBlur()}},{key:"_clearFocusoutTimeout",value:function(){this._focusoutTimeout&&(clearTimeout(this._focusoutTimeout),this._focusoutTimeout=null)}},{key:"_handleClick",value:function(e){var t=e.target.closest("."+this.getGroupStyleClass());if(t){var n=t.key,r=this.props.expanded.has(n);this._handleToggleExpanded(n,r)}this._handleTouchOrClickEvent(e)}},{key:"_handleToggleExpanded",value:function(e,t){this.updateState(function(n,r){var o=n.expandedToggleKeys;if(!o.has(e)){o=o.add([e]);var i=r.expanded;return o.values().forEach(function(e){i=t?i.delete([e]):i.add([e])}),this._updateProperty("expanded",i,!0),{expandedToggleKeys:o}}return{}}.bind(this))}},{key:"_handleKeyDown",value:function(e){if(this.currentItem){var t;switch(e.keyCode){case 37:case 39:if(this.currentItem.classList.contains(this.getGroupStyleClass())){var n=this.currentItem.key,r=this.props.expanded.has(n);(39===e.keyCode&&!r||37===e.keyCode&&r)&&this._handleToggleExpanded(n,r)}break;case 38:if(!1===this.actionableMode)for(t=this.currentItem.previousElementSibling;t&&t.previousElementSibling&&t.classList.contains("oj-stream-list-skeleton");)t=t.previousElementSibling;break;case 40:if(!1===this.actionableMode)for(t=this.currentItem.nextElementSibling;t&&t.nextElementSibling&&t.classList.contains("oj-stream-list-skeleton");)t=t.nextElementSibling;break;case 113:!1===this.actionableMode&&this._enterActionableMode();break;case 27:!0===this.actionableMode&&this._exitActionableMode(!0);break;case 9:!0===this.actionableMode&&this.currentItem&&(e.shiftKey?u.handleActionablePrevTab(e,this.currentItem)&&e.preventDefault():u.handleActionableTab(e,this.currentItem)&&e.preventDefault())}null!=t&&(t.classList.contains(this.getItemStyleClass())||t.classList.contains(this.getGroupStyleClass()))&&(this._updateCurrentItemAndFocus(t,!0),e.preventDefault())}}},{key:"_touchStartHandler",value:function(e){this._handleTouchOrClickEvent(e)}},{key:"render",value:function(){var e,t=this.state.initialSkeleton,n=this.state.initialSkeletonCount;if(null==this.contentHandler&&t)e=this._renderInitialSkeletons(n);else{var r=this.getData();null!=r&&t||null==r?e=this._renderInitialSkeletons(n,null==r):null!=r&&(e=this.contentHandler.render(),this.currentItem&&this.currentItem.contains(document.activeElement)&&(this.restoreFocus=!0))}return s.h("oj-stream-list",{ref:this.setRootElement},s.h("div",{role:"list","data-oj-context":!0,onClick:this._handleClick,onKeydown:this._handleKeyDown,onTouchstart:this._touchStartHandler,onFocusin:this._handleFocusIn,onFocusout:this._handleFocusOut},e))}},{key:"_doBlur",value:function(){this.actionableMode&&this._exitActionableMode(!1),this.currentItem&&this.currentItem.classList.remove("oj-focus")}},{key:"_isFocusBlurTriggeredByDescendent",value:function(e){return void 0===e.relatedTarget||!(null==e.relatedTarget||!this.root.contains(e.relatedTarget))}},{key:"_renderInitialSkeletons",value:function(e,t){if(t){var n=this._getScroller();null!=n&&(n.scrollTop=0)}return this.renderSkeletons(e)}},{key:"renderSkeletons",value:function(e,t,n){for(var r,o=[],i=this._isTreeData(),s=0;s<e;s++){var l=t;!t&&i&&s%4&&(l=!0),n&&(r=n+"_"+s),o.push(this._renderSkeleton(l,r))}return o}},{key:"_renderSkeleton",value:function(e,t){var n="oj-stream-list-skeleton";return e&&(n+=" oj-stream-list-child-skeleton"),s.h("div",{class:n,key:t},s.h("div",{class:"oj-stream-list-skeleton-content oj-animation-skeleton"}))}},{key:"_applySkeletonExitAnimation",value:function(e){return new Promise(function(t,n){var r=[];e.forEach(function(e){r.push(y.fadeOut(e))}),Promise.all(r).then(function(){t(!0)})})}},{key:"_isTreeData",value:function(){var e=this.props.data;return null!=e&&this.instanceOfTreeDataProvider(e)}},{key:"instanceOfTreeDataProvider",value:function(e){return"getChildDataProvider"in e}},{key:"_postRender",value:function(){this._registerScrollHandler();var e=this.getData(),t=this.state.initialSkeleton;if(null!=e&&t){var n=this.getRootElement().querySelectorAll(".oj-stream-list-skeleton");this._applySkeletonExitAnimation(n).then(function(){this.updateState({initialSkeleton:!1})}.bind(this))}else null!=e&&this.contentHandler.postRender();this.actionableMode=!1;var r=this.root.querySelectorAll(".oj-stream-list-item, .oj-stream-list-group");this._disableAllTabbableElements(r),this._restoreCurrentItem(r)}},{key:"mounted",value:function(){var e=this,t=this.props.data,n=this.props.scrollPolicyOptions.scroller?this.props.scrollPolicyOptions.scroller:this.root;this._isTreeData()?this.contentHandler=new k(n,t,this,this.props.scrollPolicyOptions):null!=t&&(this.contentHandler=new m(n,t,this,this.props.scrollPolicyOptions)),this.contentHandler.fetchRows();var r=this.root.clientHeight;this.updateState({height:r});var o=this.root.querySelector(".oj-stream-list-skeleton");if(o&&(this.skeletonHeight=this.outerHeight(o),this.updateState({initialSkeletonCount:Math.max(1,Math.floor(r/this.skeletonHeight))})),window.ResizeObserver){var i=this.root,s=new window.ResizeObserver(function(t){t.forEach(function(t){if(t.target===i&&t.contentRect){var n=e.state.height,r=Math.round(t.contentRect.height);Math.abs(r-n)>1&&e.updateState({height:r})}})});s.observe(i),this.resizeObserver=s}this._postRender()}},{key:"getSkeletonHeight",value:function(){return this.skeletonHeight}},{key:"outerHeight",value:function(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+=parseInt(n.marginTop)+parseInt(n.marginBottom)}},{key:"unmounted",value:function(){this.contentHandler&&this.contentHandler.destroy(),this.contentHandler=null,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null,this.scrollListener&&null!=this._getScroller()&&this._getScroller().removeEventListener("scroll",this.scrollListener)}},{key:"getRootElement",value:function(){return this.root}},{key:"updated",value:function(e,t){var n=t.expandingKeys;if(this.state.expandingKeys.values().forEach(function(e){n.has(e)||this.contentHandler.expand(e)}.bind(this)),this.props.data!=e.data){this.contentHandler&&this.contentHandler.destroy(),this.setCurrentItem(null),this.updateState({renderedData:null,outOfRangeData:null,initialSkeleton:!0,initialSkeletonCount:this.state.initialSkeletonCount,expandedToggleKeys:new f.KeySetImpl,expandedSkeletonKeys:new f.KeySetImpl,expandingKeys:new f.KeySetImpl});var r=this.props.scrollPolicyOptions.scroller?this.props.scrollPolicyOptions.scroller:this.root;this._isTreeData()?this.contentHandler=new k(r,this.props.data,this,this.props.scrollPolicyOptions):null!=this.props.data&&(this.contentHandler=new m(r,this.props.data,this,this.props.scrollPolicyOptions)),this.contentHandler.fetchRows()}this._postRender(),this.props.scrollPosition!=e.scrollPosition&&this._syncScrollTopWithProps()}},{key:"_unregisterScrollHandler",value:function(){this._getScrollEventElement().removeEventListener("scroll",this.scrollListener)}},{key:"_registerScrollHandler",value:function(){var e=this._getScrollEventElement();this._unregisterScrollHandler(),e.addEventListener("scroll",this.scrollListener)}},{key:"scrollListener",value:function(){var e=this;this._ticking||(window.requestAnimationFrame(function(){e._updateScrollPosition(),e._ticking=!1}),this._ticking=!0)}},{key:"_updateScrollPosition",value:function(){var e={},t=this._getScroller().scrollTop,n=this._findClosestElementToTop(t);if(e.y=t,null!=n){var r=n.elem;e.offsetY=n.offsetY,e.key=r.getAttribute("key"),this._isTreeData()&&r.classList.contains("oj-stream-list-item")?e.parentKey=this._getParentKey(r):e.parentKey=null}this._updateProperty("scrollPosition",e)}},{key:"_syncScrollTopWithProps",value:function(){var e,t=this.props.scrollPosition,n=t.key;if(n){var r=t.parentKey,o=this._getItemByKey(n,r);if(null==o)return;var i=this.root;e=o.offsetTop-i.offsetTop;var s=t.offsetY;isNaN(s)||(e+=s)}else{var l=t.y;if(isNaN(l))return;e=l}e>this._getScroller().scrollHeight||(this._getScroller().scrollTop=e)}},{key:"_getParentKey",value:function(e){for(;e;){if(e.classList.contains("oj-stream-list-group"))return e.key;e=e.previousElementSibling}return null}},{key:"_getItemByKey",value:function(e,t){for(var n=this.root.querySelectorAll(".oj-stream-list-item, .oj-stream-list-group"),r=0;r<n.length;r++){var o=n[r];if(o===e&&(null==t||this._getParentKey(o)===t))return o}}},{key:"_getScrollEventElement",value:function(){var e=this.props.scrollPolicyOptions.scroller;return null!=e?e===document.body||e===document.documentElement?window:e:this.getRootElement()}},{key:"_getScroller",value:function(){var e=this.props.scrollPolicyOptions.scroller;return null!=e?e:this.getRootElement()}},{key:"_findClosestElementToTop",value:function(e){var t=this.root.querySelectorAll(".oj-stream-list-item, .oj-stream-list-group");if(null==t||0===t.length)return null;for(var n=this.root.offsetTop,r=Math.max(e,0),o=0-n,i=r,s=0,l=t[s],a=!1,u={elem:l,offsetY:i};!a&&s>=0&&s<t.length&&(o=(l=t[s]).offsetTop-n,!(a=(i=Math.abs(r-o))<1||r<=o));)u={elem:l,offsetY:i},s+=1;return u}},{key:"_getExpandSkeletonsForKey",value:function(e){var t=[];return this.getRootElement().querySelectorAll(".oj-stream-list-child-skeleton").forEach(function(n){n.getAttribute("key")==e&&t.push(n)}),t}},{key:"isAvailable",value:function(){return null!=this.contentHandler}},{key:"getCurrentItem",value:function(){return this.currentKey}},{key:"setCurrentItem",value:function(e){this.currentKey=e}},{key:"getData",value:function(){return this.state.renderedData}},{key:"setData",value:function(e){this.updateState({renderedData:e})}},{key:"updateData",value:function(e){this.updateState(function(t){return e(t.renderedData,t.expandingKeys)}.bind(this))}},{key:"getExpanded",value:function(){return this.props.expanded}},{key:"setExpanded",value:function(e){this._updateProperty("expanded",e)}},{key:"updateExpand",value:function(e){this.updateState(function(t,n){return e(t.renderedData,t.expandedSkeletonKeys,t.expandingKeys,n.expanded)}.bind(this))}},{key:"getExpandingKeys",value:function(){return this.state.expandingKeys}},{key:"setExpandingKeys",value:function(e){this.updateState({expandingKeys:e})}},{key:"updateExpandingKeys",value:function(e){this.updateState(function(t){return{expandingKeys:t.expandingKeys.add([e])}})}},{key:"getSkeletonKeys",value:function(){return this.state.expandedSkeletonKeys}},{key:"setSkeletonKeys",value:function(e){this.updateState({expandedSkeletonKeys:e})}},{key:"updateSkeletonKeys",value:function(e){this.updateState(function(t){return{expandedSkeletonKeys:t.expandedSkeletonKeys.add([e])}})}},{key:"getOutOfRangeData",value:function(){return this.state.outOfRangeData}},{key:"setOutOfRangeData",value:function(e){this.updateState({outOfRangeData:e})}},{key:"getItemRenderer",value:function(){return this.props.itemTemplate}},{key:"getItemStyleClass",value:function(){return"oj-stream-list-item"}},{key:"getGroupRenderer",value:function(){return this.props.groupTemplate}},{key:"getGroupStyleClass",value:function(){return"oj-stream-list-group"}},{key:"_handleTouchOrClickEvent",value:function(e){var t=e.target,n=t.closest(".oj-stream-list-item, .oj-stream-list-group");n&&(this._isInputElement(t)||this._isInsideInputElement(t,n)?(this._updateCurrentItemAndFocus(n,!1),this._enterActionableMode(t)):this._updateCurrentItemAndFocus(n,!0))}},{key:"_isInputElement",value:function(e){return null!=e.nodeName.match(/^INPUT|SELECT|OPTION|TEXTAREA/)&&!e.readOnly}},{key:"_isInsideInputElement",value:function(e,t){for(var n=!1;e!==t&&null!=e;){if(e.classList.contains("oj-form-control")){e.readonly||e.disabled||(n=!0);break}e=e.parentNode}return n}},{key:"_resetFocus",value:function(e){this.actionableMode&&this._exitActionableMode(!1),e.classList.remove("oj-focus"),e.tabIndex=-1}},{key:"_setFocus",value:function(e,t){e.tabIndex=0,t&&(e.classList.add("oj-focus"),e.focus())}},{key:"_updateCurrentItemAndFocus",value:function(e,t){var n=this.currentItem,r=e;this._resetFocus(n),this._setFocus(r,t),this.currentItem=r,this.setCurrentItem(r.key)}},{key:"_isInViewport",value:function(e){var t=e.offsetTop,n=this._getScroller().scrollTop;return t>=n&&t<=n+this.state.height}},{key:"_restoreCurrentItem",value:function(e){if(null!=this.currentKey)for(var t=0;t<e.length;t++)if(h.KeyUtils.equals(e[t].key,this.currentKey)){var n=e[t];if(this.restoreFocus&&this._isInViewport(n))return void this._updateCurrentItemAndFocus(n,!0);this._setFocus(n,!1),this.currentItem=n;break}this.restoreFocus=!1}},{key:"_disableAllTabbableElements",value:function(e){e.forEach(function(e){c.getContext(e).getBusyContext().whenReady().then(function(){u.disableAllFocusableElements(e,!0)})})}},{key:"_enterActionableMode",value:function(e){if(this.actionableMode=!0,this.currentItem){var t=u.enableAllFocusableElements(this.currentItem,!0);null==e&&t&&t.length>0&&t[0].focus()}}},{key:"_exitActionableMode",value:function(e){this.actionableMode=!1,this.currentItem&&(u.disableAllFocusableElements(this.currentItem,!0),this._setFocus(this.currentItem,e))}}],[{key:"initStateFromProps",value:function(e,t){return v.updateStateFromProps(e,t,null)}},{key:"updateStateFromProps",value:function(e,t,n){var r=t.expandedToggleKeys,o=t.expandingKeys,i=t.renderedData,s=t.expandedSkeletonKeys,l=e.expanded;if(n&&l!==n.expanded){var a=n.expanded;r.values().forEach(function(e){a.has(e)!==l.has(e)&&(r=r.delete([e]))});var u=[];return i.value.metadata.forEach(function(e){var t=e.key,n=e.expanded,r=l.has(t);n&&!r?(u.push(t),e.expanded=!1):!n&&r&&(o=o.add([t]),e.expanded=!0)}),u.forEach(function(e){i=v.collapse(e,i),o=o.delete([e]),s=s.delete([e])}),{renderedData:i,expandingKeys:o,expandedToggleKeys:r,expandedSkeletonKeys:s}}}},{key:"_findIndex",value:function(e,t){for(var n=0;n<e.length;n++)if(h.KeyUtils.equals(t,e[n].key))return n;return-1}}]),o}(),n.StreamList.collapse=function(e,t){var n=t.value.data,r=t.value.metadata,o=v._findIndex(r,e);if(o>-1){var i=v._getLocalDescendentCount(r,o);n.splice(o+1,i),r.splice(o+1,i)}return{value:{data:n,metadata:r},done:t.done}},n.StreamList._getLocalDescendentCount=function(e,t){for(var n=0,r=e[t].treeDepth,o=e.length,i=t+1;i<o;i++){if(!(e[i].treeDepth>r))return n;n+=1}return n},n.StreamList.metadata={extension:{_DEFAULTS:function e(){t(this,e),this.data=null,this.expanded=new f.KeySetImpl,this.scrollPolicy="loadMoreOnScroll",this.scrollPolicyOptions={fetchSize:25,maxCount:500,scroller:null},this.scrollPosition={y:0}}},properties:{data:{type:"object|null",value:null},expanded:{type:"object",writeback:!0,readOnly:!1},scrollPolicy:{type:"string",enumValues:["loadAll","loadMoreOnScroll"],value:"loadMoreOnScroll"},scrollPolicyOptions:{type:"object",properties:{fetchSize:{type:"number",value:25},maxCount:{type:"number",value:500},scroller:{type:"Element|null",value:null}}},scrollPosition:{type:"object",properties:{y:{type:"number",value:0},key:{type:"any"},offsetY:{type:"number"},parentKey:{type:"any"}},writeback:!0,readOnly:!1}},slots:{groupTemplate:{},itemTemplate:{}}},g([s.listener()],n.StreamList.prototype,"_handleFocusIn",null),g([s.listener()],n.StreamList.prototype,"_handleFocusOut",null),g([s.listener()],n.StreamList.prototype,"_handleClick",null),g([s.listener()],n.StreamList.prototype,"_handleKeyDown",null),g([s.listener({passive:!0})],n.StreamList.prototype,"_touchStartHandler",null),g([s.listener()],n.StreamList.prototype,"scrollListener",null),n.StreamList=v=g([s.customElement("oj-stream-list")],n.StreamList),Object.defineProperty(n,"__esModule",{value:!0})})}();