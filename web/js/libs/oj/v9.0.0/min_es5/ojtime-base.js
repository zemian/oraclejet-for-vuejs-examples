/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["ojs/ojcore","jquery","ojs/ojconfig","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtToolkit","ojs/ojlocaledata","ojs/ojlogger","ojs/ojconverter-datetime","ojs/ojconverterutils-i18n","ojs/ojconverter-number"],function(e,t,n,r,o,i,a,s,m,l,d){"use strict";e.__registerWidget("oj.dvtTimeComponent",t.oj.dvtBaseComponent,{_ComponentCreate:function(){this._super(),this._SetLocaleHelpers(d,l)},_GetEventTypes:function(){return["optionChange","viewportChange"]},_HandleEvent:function(e){if("viewportChange"===e.type){var t=new Date(e.viewportStart).toISOString(),n=new Date(e.viewportEnd).toISOString(),r=e.minorAxisScale,o={viewportStart:t,viewportEnd:n,minorAxisScale:r};this._UserOptionChange("viewportStart",t),this._UserOptionChange("viewportEnd",n),this._UserOptionChange("minorAxis.scale",r),this._trigger("viewportChange",null,o)}else this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=new m.IntlDateTimeConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),t=new m.IntlDateTimeConverter({hour:"numeric",minute:"2-digit"}),n=new m.IntlDateTimeConverter({hour:"numeric"}),r=new m.IntlDateTimeConverter({month:"numeric",day:"2-digit"}),o=new m.IntlDateTimeConverter({month:"long"}),i={seconds:e,minutes:t,hours:n,days:r,weeks:r,months:o,quarters:o,years:new m.IntlDateTimeConverter({year:"numeric"})},s=this.options._resources;s.converter=i,s.defaultDateTimeConverter=new m.IntlDateTimeConverter({formatType:"datetime",dateFormat:"medium",timeFormat:"medium"}),s.defaultDateConverter=new m.IntlDateTimeConverter({formatType:"date",dateFormat:"medium"}),s.firstDayOfWeek=a.getFirstDayOfWeek()},_ProcessTemplates:function(e,t,n,r,o,i,a){var m=i?this._TemplateHandler.getComponentResults(e):null;if(!m){var l=this._GetDataProviderSeriesConfig(),d=this.element[0],u=this._super(e,t,n,r,o,i,a);if(l&&e===l.dataProperty&&!r){var p,v,h,c=[],g={},f=u.values[0],C=0,_=l.defaultSingleSeries,j=l.idAttribute,T=l.itemsKey;for(h=0;h<f.length;h++){var w,D=f[h],y={data:D._itemData,key:D.id,index:h};g[w=null!=D[j]?D[j]:_?"":D.id]?(g[w][T].push(y),c[g[w].index][T].push(D)):((v={componentElement:d,id:w,index:C})[T]=[y],g[w]=v,C+=1,(p={id:w})[T]=[D],c.push(p))}var S=l.templateName,I=l.templateElementName,E=this._TemplateHandler.getTemplates()[S];if(E)for(E=E[0],h=0;h<c.length;h++){v=g[(p=c[h]).id];try{var O=this._TemplateHandler.processNodeTemplate(e,n,E,I,v,p.id);O.id=p.id,O[T]=p[T],c[h]=O}catch(e){s.error(e)}}m={paths:u.paths,values:[c]}}else m=u;i&&this._TemplateHandler.setComponentResults(e,m)}return m},_GetDataProviderSeriesConfig:function(){return{}}})});